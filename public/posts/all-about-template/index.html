<!DOCTYPE html>
<html lang="en-us">

<head>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-179561110-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-179561110-1');
    </script>
    
   
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1"> 
    <link rel="icon" href="/images/me.gif" type="image/gif">
    <title>How and where to use C&#43;&#43; templates</title>
    
    <meta name="description" content="Using templates in C&#43;&#43;, you can create functions or classes having similar behaviours for different types. Here, all the useful features of templates are explained with examples."> 
    
    <meta name="author" content="map[name:Sorush Khajepor]">
    
    
    
    
    <link rel="stylesheet" href="https://iamsorush.com/css/style.min.css">
    
    
    
    <style>.icon{width:32px}.mr-1{margin-right:.5em}.mb-1{margin-bottom:.5em}.single-image{display:block;background-repeat:no-repeat;background-position:50%;margin-left:auto;margin-right:auto}.banner{width:100%;min-height:180px;background-image:url(/images/banner_430.jpg);padding:1em 0 2em 0}@media(min-width:430px){.banner{background-image:url(/images/banner.jpg)}}</style>
    

</head>

<body>
    
<div class="read-progress-container">
	<div class="progress-bar" id="myBar"></div>
</div>
<header class="header-black">
	<div class="container">

	<div class="home__header-grid"> 
		<div class="display-flex flex-column left-horizontal">
			<a class="scale-left-sm" href="https://iamsorush.com/">Sorush Khajepor</a>
			<span class="text-shadow-1">Researcher & Developer</span>
		</div>
		<div class="center justify-md-end">	
			<a href="https://github.com/sorush-khajepor" class="mr-1 icon" aria-label="Github">
				<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="white" d="M512 0C229.25 0 0 229.25 0 512c0 226.25 146.688 418.125 350.156 485.812 25.594 4.688 34.938-11.125 34.938-24.625 0-12.188-0.469-52.562-0.719-95.312C242 908.812 211.906 817.5 211.906 817.5c-23.312-59.125-56.844-74.875-56.844-74.875-46.531-31.75 3.53-31.125 3.53-31.125 51.406 3.562 78.47 52.75 78.47 52.75 45.688 78.25 119.875 55.625 149 42.5 4.654-33 17.904-55.625 32.5-68.375C304.906 725.438 185.344 681.5 185.344 485.312c0-55.938 19.969-101.562 52.656-137.406-5.219-13-22.844-65.094 5.062-135.562 0 0 42.938-13.75 140.812 52.5 40.812-11.406 84.594-17.031 128.125-17.219 43.5 0.188 87.312 5.875 128.188 17.281 97.688-66.312 140.688-52.5 140.688-52.5 28 70.531 10.375 122.562 5.125 135.5 32.812 35.844 52.625 81.469 52.625 137.406 0 196.688-119.75 240-233.812 252.688 18.438 15.875 34.75 47 34.75 94.75 0 68.438-0.688 123.625-0.688 140.5 0 13.625 9.312 29.562 35.25 24.562C877.438 930 1024 738.125 1024 512 1024 229.25 794.75 0 512 0z"/></svg>
			</a>
			<a href="https://twitter.com/KhSorush" class="mr-1 icon" aria-label="Twitter">
				<svg id="Logo_FIXED" data-name="Logo â€” FIXED" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><defs><style>.cls-1{fill:none;}.cls-2{fill:#1da1f2;}</style></defs><title>Twitter_Logo_Blue</title><rect class="cls-1" width="400" height="400"/><path class="cls-2" d="M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23"/></svg>
			</a>
			<a href="https://scholar.google.co.uk/citations?user=16Y7-NsAAAAJ&hl=en" class="mr-1 icon" aria-label="Google Scholar">
				<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g data-name="Layer 2" id="Layer_2"><polygon fill="white" points="0.54 9 5 10.98 7 11.87 12 14.09 17 11.87 19 10.98 20 10.54 20 16 22 16 22 9.65 23.46 9 12 3.91 0.54 9"/><path fill="white" d="M18.45,18.89l.55-.27V13.17l-7,3.11L5,13.17v5.45l.55.27a14.45,14.45,0,0,0,12.9,0Z"/></g></svg>
			</a>
			<a href="https://stackoverflow.com/users/2543510/sorush" class="mr-1 icon" aria-label="Stackoverflow">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><style>.st0{fill:#bcbbbb}.st1{fill:#f48023}</style><path class="st0" d="M84.4 93.8V70.6h7.7v30.9H22.6V70.6h7.7v23.2z"/><path class="st1" d="M38.8 68.4l37.8 7.9 1.6-7.6-37.8-7.9-1.6 7.6zm5-18l35 16.3 3.2-7-35-16.4-3.2 7.1zm9.7-17.2l29.7 24.7 4.9-5.9-29.7-24.7-4.9 5.9zm19.2-18.3l-6.2 4.6 23 31 6.2-4.6-23-31zM38 86h38.6v-7.7H38V86z"/></svg>
			</a>
			<a href="https://www.linkedin.com/in/sorushkh/" class="mr-1 icon" aria-label="Linkedin">
				<svg enable-background="new 0 0 32 32" height="32px" id="Layer_1" version="1.0" viewBox="0 0 32 32" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M32,30c0,1.104-0.896,2-2,2H2c-1.104,0-2-0.896-2-2V2c0-1.104,0.896-2,2-2h28c1.104,0,2,0.896,2,2V30z" fill="#007BB5"/><g><rect fill="#FFFFFF" height="14" width="4" x="7" y="11"/><path d="M20.499,11c-2.791,0-3.271,1.018-3.499,2v-2h-4v14h4v-8c0-1.297,0.703-2,2-2c1.266,0,2,0.688,2,2v8h4v-7    C25,14,24.479,11,20.499,11z" fill="#FFFFFF"/><circle cx="9" cy="8" fill="#FFFFFF" r="2"/></g></g><g/><g/><g/><g/><g/><g/></svg>
			</a>
		</div>
    </div>
	</div>
</header>

<main>
	<article>
		<h1>How and where to use C&#43;&#43; templates</h1>
		<time>30 Oct 2020</time>
	</article>
	














<style>
    .post__hero{
        background-image: url('https://iamsorush.com/images/hive_hu3d03a01dcc18bc5be0e67db3d8d209a6_172017_430x250_fill_q70_box_smart1.jpg');
        height: 250px;
    }
    @media (min-width: 430px) {
        .post__hero{
        background-image: url('https://iamsorush.com/images/hive_hu3d03a01dcc18bc5be0e67db3d8d209a6_172017_1280x400_fill_q70_box_smart1.jpg');
        height: 400px;
        }
    }   
</style>
<div class="single-image post__hero"></div>
	<div class="article-nav" id="article-nav-id">
		<article class="overlay-top">
			<h2 id="template">Template</h2>
<p>Using templates in C++, we can create a function or class template having a generic behaviour for different types. Therefore, we write and maintain less code.</p>
<p>At compile time, the compiler assesses the code and can turn a class (or function) template to multiple classes (or functions). Afterwards, at run-time, the classes create objects.</p>
<h2 id="class-template">Class Template</h2>
<p>Instead of hard-coding two similar classes, Point2dInt,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point2dInt</span>{
    
    <span style="color:#66d9ef">int</span> data[<span style="color:#ae81ff">2</span>];
    
    <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span>[] (size_t i){
        <span style="color:#66d9ef">return</span> data[i];
    }
};
</code></pre></div><p>and Point2dString,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point2dString</span>{
    
    string data[<span style="color:#ae81ff">2</span>];
    
    <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    string<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span>[] (size_t i){
        <span style="color:#66d9ef">return</span> data[i];
    }
};
</code></pre></div><p>we can have one class template with a generic type which can be <code>int</code>, <code>string</code>, and so on.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point2D</span>{
    
    T data[<span style="color:#ae81ff">2</span>];
    
    <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    T<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span>[] (size_t i){
        <span style="color:#66d9ef">return</span> data[i];
    }
};
</code></pre></div><p>If the compiler only sees the above code, it doesn&rsquo;t instantiate any Point2D class.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  Point2D<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> a; <span style="color:#75715e">// T = int
</span><span style="color:#75715e"></span>  a[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; a[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;
  cout<span style="color:#f92672">&lt;&lt;</span> a[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;&lt;</span> a[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">//12
</span><span style="color:#75715e"></span>
  Point2D<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span> b; <span style="color:#75715e">// T = string
</span><span style="color:#75715e"></span>  b[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;X&#34;</span>; b[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Y&#34;</span>;
  cout<span style="color:#f92672">&lt;&lt;</span> b[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;&lt;</span> b[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">//XY
</span><span style="color:#75715e"></span>}
</code></pre></div><p>However, when the compiler sees the above code, it instantiates two classes <code>Point2D&lt;int&gt;</code> and <code>Point2D&lt;string&gt;</code> which are similar to <code>point2dInt</code> and <code>point2dString</code>.</p>
<p>Values, which are needed at compile time, can be injected into a template. If we want a C-style array as the storage for the data, its size is needed at compile time</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span>, size_t size<span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FixedArray</span>{
  T data[size];
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
  T<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span>[] (size_t i){
    <span style="color:#66d9ef">return</span> data[i];
  }
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  FixedArray<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">5</span><span style="color:#f92672">&gt;</span> a;
  a[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>;
  std<span style="color:#f92672">::</span>cout<span style="color:#f92672">&lt;&lt;</span> a[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl; <span style="color:#75715e">// 8
</span><span style="color:#75715e"></span>}
</code></pre></div><p>You can find more info about creating arrays in <a href="https://iamsorush.com/posts/create-arrays/">this post</a>.</p>
<h2 id="function-template">Function template</h2>
<p>A function template can also be created which is dependent on a generic type</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">void</span> Swap(T<span style="color:#f92672">&amp;</span> a, T<span style="color:#f92672">&amp;</span> b){
    <span style="color:#66d9ef">auto</span> tmp <span style="color:#f92672">=</span> a;
    a <span style="color:#f92672">=</span> b;
    b <span style="color:#f92672">=</span> tmp;  
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
    Swap(a,b);
    std<span style="color:#f92672">::</span>cout<span style="color:#f92672">&lt;&lt;</span> a <span style="color:#f92672">&lt;&lt;</span> b <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl; <span style="color:#75715e">// 10
</span><span style="color:#75715e"></span>    
    std<span style="color:#f92672">::</span>string x <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Hi &#34;</span>;
    std<span style="color:#f92672">::</span>string y <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Jack &#34;</span>;
    Swap(x,y);
    std<span style="color:#f92672">::</span>cout<span style="color:#f92672">&lt;&lt;</span> x <span style="color:#f92672">&lt;&lt;</span> y <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl; <span style="color:#75715e">// Jack Hi
</span><span style="color:#75715e"></span>}
</code></pre></div><p>For more info about <code>auto</code> keyword in this example, see <a href="https://iamsorush.com/posts/auto-cpp/">this post</a>.</p>
<p>A function template can also be dependent on a compile-time value</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;array&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span>, size_t n<span style="color:#f92672">&gt;</span> <span style="color:#75715e">// n is a compile-time value
</span><span style="color:#75715e"></span>T dot(array<span style="color:#f92672">&lt;</span>T, n<span style="color:#f92672">&gt;</span> a, array<span style="color:#f92672">&lt;</span>T,n<span style="color:#f92672">&gt;</span> b){
  
  T sum <span style="color:#f92672">=</span> a[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>b[<span style="color:#ae81ff">0</span>];
  <span style="color:#66d9ef">for</span> (size_t i<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">&lt;</span>n;i<span style="color:#f92672">++</span>){
    sum <span style="color:#f92672">+=</span> a[i]<span style="color:#f92672">*</span>b[i];
  }
  <span style="color:#66d9ef">return</span> sum;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  array<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span> v1 <span style="color:#f92672">=</span> {<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>};
  array<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span> v2 <span style="color:#f92672">=</span> {<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>};
  cout<span style="color:#f92672">&lt;&lt;</span> dot<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span>(v1,v2) <span style="color:#f92672">&lt;&lt;</span>endl; <span style="color:#75715e">// 12
</span><span style="color:#75715e"></span>}

</code></pre></div><h2 id="call-function-template-explicitly">Call function template explicitly</h2>
<p>In the previous examples, compiler figures type <code>T</code> out. But it gets confused for this case:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  <span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;
  <span style="color:#66d9ef">double</span> b<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>;
  cout<span style="color:#f92672">&lt;&lt;</span> Min(a,b) <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// Error: T is int or double?
</span><span style="color:#75715e"></span>}
</code></pre></div><p>To solve this, template type needs to be mentioned explicitly:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">cout<span style="color:#f92672">&lt;&lt;</span> Min<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(a,b) <span style="color:#f92672">&lt;&lt;</span> endl;
</code></pre></div><p>Another example that the compiler cannot figure out the type is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">void</span> MyCast(<span style="color:#66d9ef">double</span> d){
    T a <span style="color:#f92672">=</span> (T) d;
    std<span style="color:#f92672">::</span>cout<span style="color:#f92672">&lt;&lt;</span> a <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  MyCast(<span style="color:#ae81ff">2.3</span>); <span style="color:#75715e">// Error: So what is T?
</span><span style="color:#75715e"></span>  MyCast<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#ae81ff">2.3</span>); <span style="color:#75715e">// 2  OK, T is int.
</span><span style="color:#75715e"></span>}
</code></pre></div><h2 id="template-specialization">Template specialization</h2>
<p>Sometimes the details of a template class/function need to be special for a type. For example, we define a special calculation for type <code>string</code> of <code>Min</code> function:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
T Min(T a, T b){
  <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&gt;=</span>b<span style="color:#f92672">?</span>b:a;
}

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;&gt;</span>
string Min<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span>(string a, string b){
    <span style="color:#66d9ef">auto</span> m <span style="color:#f92672">=</span> a.length();
    <span style="color:#66d9ef">auto</span> n <span style="color:#f92672">=</span> b.length();
    <span style="color:#66d9ef">return</span>    m<span style="color:#f92672">&gt;=</span>n<span style="color:#f92672">?</span>b:a;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  <span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;
  <span style="color:#66d9ef">int</span> b<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>;
  string x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello&#34;</span>;
  string y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hi&#34;</span>;
  std<span style="color:#f92672">::</span>cout<span style="color:#f92672">&lt;&lt;</span> Min(a,b) <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;<span style="color:#75715e">// 2
</span><span style="color:#75715e"></span>  std<span style="color:#f92672">::</span>cout<span style="color:#f92672">&lt;&lt;</span> Min(x,y) <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl; <span style="color:#75715e">// Hi
</span><span style="color:#75715e"></span>}
</code></pre></div><h2 id="default-types">Default types</h2>
<p>A template parameter can have a default type</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T <span style="color:#f92672">=</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">A</span>{
    T x<span style="color:#f92672">=</span><span style="color:#ae81ff">10.5</span>;
};
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
    A<span style="color:#f92672">&lt;&gt;</span> a; <span style="color:#75715e">// T = int
</span><span style="color:#75715e"></span>    cout<span style="color:#f92672">&lt;&lt;</span> a.x; <span style="color:#75715e">// 10
</span><span style="color:#75715e"></span>    
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>Since <em>C++17</em>, it is not necessary to mention empty brackets:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">A a; <span style="color:#75715e">// equals to A&lt;int&gt; a;
</span></code></pre></div><h2 id="definition--declaration-files">Definition &amp; declaration files</h2>
<p>It&rsquo;s a good practice to separate a class definition (implementation) file from its declaration file. However, a problem is that the compiler creates a class out of a template only when it sees a template specialization or a class instantiation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">
<span style="color:#75715e">//file sample.h
</span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Sample</span>
{
	T <span style="color:#a6e22e">Compute</span>();
};

<span style="color:#75715e">//file sample.cpp
</span><span style="color:#75715e"></span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;sample.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
T Sample<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>Compute(){

	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">T</span>();
}

<span style="color:#75715e">//file main.cpp
</span><span style="color:#75715e"></span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;sample.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Sample<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> s;
	
	std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> s.Compute();
	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div><p><em>sample.cpp</em> is successfully compiled to sample.o, but it doesn&rsquo;t have a clue that, in <em>main.cpp</em>, <code>Sample&lt;int&gt;</code> is used, so the compiler does not create that special class. Therefore, when <em>main.cpp</em> is compiled with <em>sample.o</em> we get a linking error.</p>
<p>The easiest solution is to put both declaration and definition in the same file, <em>sample.h</em>. But it increases the size of the executable file and surpasses capabilities that separation of declaration and definition brings like solving circular dependencies.</p>
<p>The second solution is to inform the compiler that we need that special class</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// file sample.cpp
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;sample.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
T Sample<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>Compute(){

	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">T</span>();
}

<span style="color:#75715e">// This line is the key!
</span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Sample</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>;

</code></pre></div><p>Now compiling <em>sample.cpp</em>, we get a <em>sample.o</em> containing <code>Sample&lt;int&gt;</code> class.</p>
<p>To instantiate a function template, see example below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// abs.cpp
</span><span style="color:#75715e"></span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">auto</span> Abs (<span style="color:#66d9ef">const</span> T<span style="color:#f92672">&amp;</span> a)
{
    size_t n <span style="color:#f92672">=</span>  a.size();
    vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">decltype</span>(a[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>a[<span style="color:#ae81ff">1</span>])<span style="color:#f92672">&gt;</span> result(n); <span style="color:#75715e">// decltype of prvalue to remove const &amp;
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">decltype</span>(n) i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>)
		result[i] <span style="color:#f92672">=</span> a[i]<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span><span style="color:#f92672">?</span> a[i]<span style="color:#f92672">:</span> <span style="color:#f92672">-</span>a[i];
	<span style="color:#66d9ef">return</span> result;
}

<span style="color:#75715e">// This is the key for function instantiation 
</span><span style="color:#75715e">// in the object file
</span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#66d9ef">auto</span> <span style="color:#a6e22e">Abs</span>(<span style="color:#66d9ef">const</span> vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&amp;</span> a) ;

</code></pre></div><h2 id="store-types--parameters">Store types &amp; parameters</h2>
<p>The types and parameters used in a template can be stored in the class by <code>using</code> and <code>static</code> variables:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span>size_t dim, <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Specs</span>{
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> size_t Dim <span style="color:#f92672">=</span> dim; <span style="color:#75715e">// store dim
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">using</span> Type <span style="color:#f92672">=</span> T; <span style="color:#75715e">// store T
</span><span style="color:#75715e"></span>};
</code></pre></div><p>In another scope, we have access to this info</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">S</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Particle</span>{
    <span style="color:#66d9ef">typename</span> S<span style="color:#f92672">::</span>Type Position[S<span style="color:#f92672">::</span>Dim];<span style="color:#75715e">// access S::Type &amp; S::Dim
</span><span style="color:#75715e"></span>};

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">S</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Box</span>{
    <span style="color:#66d9ef">typename</span> S<span style="color:#f92672">::</span>Type Extent[S<span style="color:#f92672">::</span>Dim]; <span style="color:#75715e">// access S::Type &amp; S::Dim
</span><span style="color:#75715e"></span>};
</code></pre></div><p>Note that <code>typename</code> is necessary to let the compiler know <code>S::Type</code> is a type. In <code>Particle</code> and <code>Box</code>, We can also create an alias for <code>Specs</code> type:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">using</span> Type <span style="color:#f92672">=</span> <span style="color:#66d9ef">typename</span> S<span style="color:#f92672">::</span>Type;
Type Position[S<span style="color:#f92672">::</span>Dim];
</code></pre></div><p>And the implementation is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
    <span style="color:#66d9ef">using</span> specs <span style="color:#f92672">=</span> Specs<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">3</span>,<span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span>;
    Particle<span style="color:#f92672">&lt;</span>specs<span style="color:#f92672">&gt;</span> p;
    Box<span style="color:#f92672">&lt;</span>specs<span style="color:#f92672">&gt;</span> b;
    cout<span style="color:#f92672">&lt;&lt;</span> <span style="color:#66d9ef">sizeof</span>(p)<span style="color:#f92672">&lt;&lt;</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">&lt;&lt;</span><span style="color:#66d9ef">sizeof</span>(b)<span style="color:#f92672">&lt;&lt;</span>endl; <span style="color:#75715e">//24 24
</span><span style="color:#75715e"></span>}
</code></pre></div><p>Note that storing template types in a class is easier to read than nested templates:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> U, <span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">domain</span>{...}
</code></pre></div><h2 id="type-constraints">Type Constraints</h2>
<p>We can limit the types that a template can take using <code>static_assert</code>, <code>std::is_same</code>, and <code>std::is_base_of</code> :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;type_traits&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Foo</span>
{
	Foo() {
		<span style="color:#66d9ef">static_assert</span>(std<span style="color:#f92672">::</span>is_same<span style="color:#f92672">&lt;</span>T, <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;::</span>value, <span style="color:#e6db74">&#34;T must be int&#34;</span>);
	}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  Foo<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> a; <span style="color:#75715e">// works fine
</span><span style="color:#75715e"></span>  Foo<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">bool</span><span style="color:#f92672">&gt;</span> b; <span style="color:#75715e">// Error: T must be int
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>From <em>C++20</em>, we have <code>concept</code> which systematically constrains a template</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;array&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">concept</span> IsVector <span style="color:#f92672">=</span> <span style="color:#66d9ef">requires</span> (T x) {
    <span style="color:#75715e">// below lines must be valid expressions
</span><span style="color:#75715e"></span>    x.size(); <span style="color:#75715e">// size() is defined.
</span><span style="color:#75715e"></span>    x[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>x[<span style="color:#ae81ff">0</span>]; <span style="color:#75715e">// addable elements
</span><span style="color:#75715e"></span>    x.push_back(<span style="color:#ae81ff">0</span>); <span style="color:#75715e">// push_back is defined
</span><span style="color:#75715e"></span>}; 
 
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span> 
<span style="color:#66d9ef">requires</span> IsVector<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#75715e">// imposing IsVector concept 
</span><span style="color:#75715e"></span>T add(T a, T b) {
    T <span style="color:#a6e22e">c</span>(a.size());
    <span style="color:#66d9ef">for</span> (size_t i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; i<span style="color:#f92672">&lt;</span>a.size(); i<span style="color:#f92672">++</span>)
        c[i]<span style="color:#f92672">=</span>a[i]<span style="color:#f92672">+</span>b[i];    
    <span style="color:#66d9ef">return</span> c; 
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
    vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> x<span style="color:#f92672">=</span>{<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>};
    vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> y<span style="color:#f92672">=</span>{<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>};
    <span style="color:#66d9ef">auto</span> z <span style="color:#f92672">=</span> add(x,y);
    cout<span style="color:#f92672">&lt;&lt;</span>z[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">&lt;&lt;</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">&lt;&lt;</span>z[<span style="color:#ae81ff">1</span>]; <span style="color:#75715e">// 3, 3
</span><span style="color:#75715e"></span>    
    array<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span> m<span style="color:#f92672">=</span>{<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>};
    array<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span> n<span style="color:#f92672">=</span>{<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">3</span>};
    <span style="color:#75715e">// auto k = add(m,n); // Error:: &#39;x.push_back(0)&#39; is invalid
</span><span style="color:#75715e"></span>    
    <span style="color:#75715e">// auto w = add(1,2); // Error &#39;x.size()&#39; is invalid
</span><span style="color:#75715e"></span>    
<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><h2 id="enforcing-inheritance">Enforcing inheritance</h2>
<p>When inheriting from a template class, the compiler overlooks what is inherited.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Animal</span>{
  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Move</span>(){}
};

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Dog</span><span style="color:#f92672">:</span> Animal<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span>{
  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Run</span>(){
    Move(); <span style="color:#75715e">// Error: Move() no defined!
</span><span style="color:#75715e"></span>  }
};
</code></pre></div><p>In the example above, when <code>Dog</code> is compiled, the compiler overlooks the content of <code>Animal</code> because it is
dependent on <code>T</code>. Therefore, it has no idea of <code>Move()</code> coming from <code>Animal</code>. To fix that, call the method using <code>this</code> to defer the check until template instantiation:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>Move();
</code></pre></div><p>Another fix is to declare the method:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Dog</span><span style="color:#f92672">:</span> Animal{
  <span style="color:#66d9ef">using</span> Animal<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>Move;
<span style="color:#75715e">// rest...
</span><span style="color:#75715e"></span>}
</code></pre></div><h2 id="type-alias">Type Alias</h2>
<p>Since <em>C++11</em>, we can define a type alias for hard to read names</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">using</span> VecPoint <span style="color:#f92672">=</span> vector<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;&gt;</span>
</code></pre></div><p>See <a href="https://iamsorush.com/posts/how-use-cpp-raw-pointer/#owner-convention">here</a>, I created an alias for pointers to have an ownership convention.</p>
<h2 id="metaprogramming">Metaprogramming</h2>
<p>Metaprogramming is to write a program that writes another program. Here in C++, we use metaprogramming to create desired classes and functions at compile time. Moreover, we can target compile-time values and types. For concluding values,
I recommend before resorting to templates, have a look at <code>constexpr</code> which is clean and easy to read.</p>
<p>We can assess and conclude types using templates, for example, <code>const</code> qualifier can be dropped by</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;type_traits&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// generic type
</span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span> 
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">RemoveConst</span>{ 
    <span style="color:#66d9ef">typedef</span> T type;             
};

<span style="color:#75715e">// const specialization
</span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span> 
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">RemoveConst</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">const</span> T<span style="color:#f92672">&gt;</span> { 
    <span style="color:#66d9ef">typedef</span> T type;               
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){    
    std<span style="color:#f92672">::</span>cout<span style="color:#f92672">&lt;&lt;</span>std<span style="color:#f92672">::</span>is_same<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, RemoveConst<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;::</span>type<span style="color:#f92672">&gt;::</span>value; <span style="color:#75715e">// true
</span><span style="color:#75715e"></span>    std<span style="color:#f92672">::</span>cout<span style="color:#f92672">&lt;&lt;</span>std<span style="color:#f92672">::</span>is_same<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, RemoveConst<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;::</span>type<span style="color:#f92672">&gt;::</span>value;  <span style="color:#75715e">// true
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>The metafunction above is defined in the standard library as <code>std::remove_const</code>. In most cases, metafunctions  defined in  <code>&lt;type_traits&gt;</code> header such as <code>true_type</code>, <code>false_type</code>, <code>conditional</code>, <code>is_same</code> along with <code>decltype</code>, <code>if constexpr</code> and <code>static_assert</code>  meet our metaprogramming needs.</p>
<h2 id="practical-cases">Practical Cases</h2>
<h3 id="customize-stl-containers">Customize STL Containers</h3>
<p>Templates are mostly used for creating custom containers. In the below example,  a vector is created that can print its items on the screen. The type of items can be any that supports <code>cout&lt;&lt;</code> command.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PrintableVector</span>{
    vector<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> data;
    <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    PrintableVector(std<span style="color:#f92672">::</span>initializer_list<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> list){
        data.assign(list);
    }
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Print</span>(){
      <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;</span> item: data)
        cout<span style="color:#f92672">&lt;&lt;</span> item<span style="color:#f92672">&lt;&lt;</span><span style="color:#e6db74">&#34; &#34;</span>;
    }
};
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
   PrintableVector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> a({<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">7</span>});
   a.Print(); <span style="color:#75715e">// 1 3 5 7
</span><span style="color:#75715e"></span>   <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>A more intricate example can be found <a href="https://github.com/sorush-khajepor/Sarray">on GitHub</a>, where I created a generic array that supports: +, -, *, /, dot product and so on.</p>
<h3 id="multidimensional-space">Multidimensional space</h3>
<p>Templates can helps us design a program with different dimensions with the same code. The below code, defines <code>Point</code> in 1D, 2D, &hellip;, and nD dimensions:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span>, size_t size<span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>{
    T data[size];
    <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    Point(){
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;</span> item: data)
            item <span style="color:#f92672">=</span> T();
    }
    Point(std<span style="color:#f92672">::</span>initializer_list<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> list){
        size_t i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;</span> item: list){
            data[i] <span style="color:#f92672">=</span> item;
            i<span style="color:#f92672">++</span>;
            <span style="color:#66d9ef">if</span> (i<span style="color:#f92672">&gt;=</span>size) <span style="color:#66d9ef">break</span>;
        }
    }
    Point <span style="color:#a6e22e">GetDistanceTo</span>(Point<span style="color:#f92672">&amp;</span> point){
        Point distance;
        <span style="color:#66d9ef">for</span> (size_t i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;i<span style="color:#f92672">&lt;</span>size;i<span style="color:#f92672">++</span>){
            distance[i] <span style="color:#f92672">=</span> data[i] <span style="color:#f92672">-</span> point[i];
        }
        <span style="color:#66d9ef">return</span> distance;
    }
    T<span style="color:#f92672">&amp;</span> <span style="color:#66d9ef">operator</span>[] (size_t i){
        <span style="color:#66d9ef">return</span> data[i];
    }
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Print</span>(){
      <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;</span> item: data)
        cout<span style="color:#f92672">&lt;&lt;</span> item<span style="color:#f92672">&lt;&lt;</span><span style="color:#e6db74">&#34; &#34;</span>;
      cout<span style="color:#f92672">&lt;&lt;</span>endl;
    }
};
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
  
   Point<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;</span> a({<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>}); <span style="color:#75715e">// 3D point
</span><span style="color:#75715e"></span>   Point<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;</span> origin({<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>}); <span style="color:#75715e">// 3D point
</span><span style="color:#75715e"></span>   
   Point<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span> m({<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">5</span>}); <span style="color:#75715e">// 2D point
</span><span style="color:#75715e"></span>   Point<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span> n({<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">4</span>}); <span style="color:#75715e">// 2D point
</span><span style="color:#75715e"></span>   
   a.GetDistanceTo(origin).Print(); <span style="color:#75715e">// 2 2 2
</span><span style="color:#75715e"></span>   m.GetDistanceTo(n).Print();<span style="color:#75715e">// 1 1
</span><span style="color:#75715e"></span><span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><h3 id="interface">Interface</h3>
<p>When we know the general behaviour of a class and we want that behaviour to be implemented, an interface can be useful. The interface becomes more flexible if it uses a template.</p>
<p>A rough example is shown below. We have a set of solver classes that inherit from <code>ISolver</code> interface. They are always run with that interface. The outcome of these solvers needs to be visualized with <code>Visualizer</code> class. However, their outcomes are different from each other: string, double, vector<int>, and so on.</p>
<p>To connect visualizers and solvers, we define <code>Message</code> template class that represents the outcome of solvers. <code>Visualizer</code> class template is also created which is specialized concerning message types. Finally, the execution and visualization of different types are handled within a simple and generic function, <code>RunAndDisplay()</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Message</span>{
    Message(T _content)<span style="color:#f92672">:</span>content(_content){}
    <span style="color:#66d9ef">virtual</span> T <span style="color:#a6e22e">GetContent</span>() {<span style="color:#66d9ef">return</span> content;}
    <span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    T content;
};

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">ISolver</span>{
    <span style="color:#66d9ef">virtual</span> Message<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> Run()<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
};

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Visualizer</span>{
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Show</span>(Message<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> message){};
};
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Visualizer</span><span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span>{
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Show</span>(Message<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;&amp;</span> message){
        cout<span style="color:#f92672">&lt;&lt;</span><span style="color:#e6db74">&#34;String Message: &#34;</span><span style="color:#f92672">&lt;&lt;</span>message.GetContent()<span style="color:#f92672">&lt;&lt;</span>endl;
    };
};
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;&gt;</span>
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Visualizer</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span>{
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Show</span>(Message<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> message){
        cout<span style="color:#f92672">&lt;&lt;</span><span style="color:#e6db74">&#34;Number Message: &#34;</span><span style="color:#f92672">&lt;&lt;</span>message.GetContent()<span style="color:#f92672">&lt;&lt;</span>endl;
    };
};

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">SolverA</span><span style="color:#f92672">:</span> ISolver<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span>{
    Message<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span> Run() <span style="color:#66d9ef">override</span>{
        Message<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span> m(<span style="color:#e6db74">&#34;Solver A is Run.&#34;</span>);
        <span style="color:#66d9ef">return</span> m;
    }
};
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">SolverB</span><span style="color:#f92672">:</span> ISolver<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span>{
    Message<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> Run() <span style="color:#66d9ef">override</span>{
        Message<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> m(<span style="color:#ae81ff">3.14</span>);
        <span style="color:#66d9ef">return</span> m;
    }
};
<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">void</span> RunAndDisplay(ISolver<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;*</span> solver){
    <span style="color:#66d9ef">auto</span> m <span style="color:#f92672">=</span> solver<span style="color:#f92672">-&gt;</span>Run();
    Visualizer<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> v;
    v.Show(m);
}
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
   
   ISolver<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;*</span> solverA <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SolverA();
   ISolver<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;*</span> solverB <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SolverB();
   
   RunAndDisplay(solverA);
   RunAndDisplay(solverB);
<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div><h2 id="references">References</h2>
<p><a href="https://isocpp.org/wiki/faq/templates#fn-templates">isocpp.org</a>
<a href="https://en.cppreference.com/w/cpp/language/templates">cppreference.com</a></p>

			<script>
				window.onscroll = function () {
					myFunction();
				};
				function myFunction() {
					var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
					var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
					var scrolled = (winScroll / height) * 100;
					document.getElementById("myBar").style.width = scrolled + "%";
				}
			</script>
			<hr style="width:5%;text-align:left;margin-left:0;margin-top: 3em;border-top: 3px solid rgb(87, 86, 86);
			border-radius: 5px;">
			


  <h3>Related Tags</h3>
    <div id="tags">
        
        <span><a href="/tags/c&#43;&#43;">C&#43;&#43;</a> </span>
        
        <span><a href="/tags/template">Template</a> </span>
        
    </div>



			<hr style="width:5%;text-align:left;margin-left:0;margin-top: 3em;border-top: 3px solid rgb(87, 86, 86);
			border-radius: 5px;">
			
<div>
	<h3>Latest Posts</h3>
</div>
<div>
	<ul>
		
		<li><a href="/posts/build-gcc11/">Build GCC 11 from source in Ubuntu</a></li>
		
		<li><a href="/posts/ssh-port-forwarding/">SSH port forwarding to download files</a></li>
		
		<li><a href="/posts/cpp-span/">Span is a new norm in C&#43;&#43; codes</a></li>
		
		<li><a href="/posts/vs-code-extensions/">Essential VS Code font and extensions for C&#43;&#43;</a></li>
		
		<li><a href="/posts/perfect-forwarding-cpp/">An overview of C&#43;&#43; perfect forwarding</a></li>
		
	</ul>
</div>
	
		</article>
		<nav class="hide-on-mobile section-nav">
			<h3 class="ml-1">Table of contents</h3>
			<nav id="TableOfContents">
  <ul>
    <li><a href="#template">Template</a></li>
    <li><a href="#class-template">Class Template</a></li>
    <li><a href="#function-template">Function template</a></li>
    <li><a href="#call-function-template-explicitly">Call function template explicitly</a></li>
    <li><a href="#template-specialization">Template specialization</a></li>
    <li><a href="#default-types">Default types</a></li>
    <li><a href="#definition--declaration-files">Definition &amp; declaration files</a></li>
    <li><a href="#store-types--parameters">Store types &amp; parameters</a></li>
    <li><a href="#type-constraints">Type Constraints</a></li>
    <li><a href="#enforcing-inheritance">Enforcing inheritance</a></li>
    <li><a href="#type-alias">Type Alias</a></li>
    <li><a href="#metaprogramming">Metaprogramming</a></li>
    <li><a href="#practical-cases">Practical Cases</a>
      <ul>
        <li><a href="#customize-stl-containers">Customize STL Containers</a></li>
        <li><a href="#multidimensional-space">Multidimensional space</a></li>
        <li><a href="#interface">Interface</a></li>
      </ul>
    </li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
		</nav>		
	</div>
</main>

<script>
	window.addEventListener('DOMContentLoaded', () => {
		const observerForTableOfContentActiveState = new IntersectionObserver(entries => {
			entries.forEach(entry => {
				const id = entry.target.getAttribute('id');

				if (entry.intersectionRatio > 0) {					
					clearActiveStatesInTableOfContents();				
					document.querySelector(`nav li a[href="#${id}"]`).parentElement.classList.add('active');
				}
			});
		});		
		document.querySelectorAll('h1[id],h2[id],h3[id],h4[id]').forEach((section) => {
			observerForTableOfContentActiveState.observe(section);
		});

	});

	function clearActiveStatesInTableOfContents() {
		document.querySelectorAll('nav li').forEach((section) => {
			section.classList.remove('active');
		});
	}
</script>
 <footer>
    <div class="container home__footer-grid">
	<div class=" my-2">
	<form name="Subscription" method="POST" data-netlify="true" netlify-honeypot="ahani" action="/pages/sub-success">
		<p class="nedia">
		  <label> Name <input name="ahani" /></label>
		</p>
		<p><label for="emailinput">Subscribe so I notify you of new posts</label></p>
		<p class="display-flex">
		  <input id="emailinput" style="width: 18em;" class="mr-1" type="email" name="email" placeholder=" Email"/>
		  <button type="submit">Subscribe</button>
		</p>
	</form>
</div>
<div class="my-1 display-flex justify-start justify-md-end align-center">
	<p>Copyright &copy; 2021 <a href="https://iamsorush.com/">Sorush Khajepor</a></p>
</div>
</div>
</footer>



  
</body>

</html>